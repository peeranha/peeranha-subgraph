type User @entity {
  id: ID!
  ratings: [UserCommunityRating!]
  displayName: String
  postCount: Int
  replyCount: Int
  company: String
  position: String
  location: String
  about: String
  avatar: String
  creationTime: BigInt
  ipfsHash: Bytes
  ipfsHash2: Bytes
  followedCommunities: [Community!]
  achievements: [Achievement!]
}

type UserCommunityRating @entity {
  id: ID!
  communityId: Int
  rating: Int
  user: User
} 

type Community @entity {
  id: ID!
  name: String
  description: String
  website: String
  language: String
  avatar: String
  isFrozen: Boolean
  creationTime: BigInt
  postCount: Int
  deletedPostCount: Int
  replyCount: Int
  tagsCount: Int
  followingUsers: Int
  ipfsHash: Bytes
  ipfsHash2: Bytes
}

type Tag @entity {
  id: ID!
  communityId: BigInt
  name: String
  description: String
  postCount: Int
  deletedPostCount: Int
  ipfsHash: Bytes
  ipfsHash2: Bytes
}

enum PostType {
  ExpertPost
  CommonPost
  Tutorial
}

type _Schema_
@fulltext(
  name: "postSearch"
  language: en
  algorithm: rank
  include: [{ entity: "Post", fields: [{ name: "title" }, { name: "content" }] }]
)

type Post @entity {
  id: ID!
  tags: [Int!]
  ipfsHash: Bytes
  ipfsHash2: Bytes
  postType: Int
  
  author: User!
  rating: Int
  postTime: BigInt
  communityId: BigInt!

  title: String
  content: String

  commentCount: Int
  replyCount: Int
  isDeleted: Boolean

  officialReply: Int
  bestReply: Int
  isFirstReply: Boolean
  isQuickReply: Boolean
  properties: [BigInt!]
  replies: [Reply!]
  comments: [Comment!]
}

type Reply @entity {
  id: ID!
  ipfsHash: Bytes
  ipfsHash2: Bytes
  author: User!
  rating: Int
  postTime: BigInt
  postId: BigInt
  parentReplyId: Int

  content: String

  commentCount: Int
  isDeleted: Boolean

  isOfficialReply: Boolean
  isBestReply: Boolean
  isFirstReply: Boolean
  isQuickReply: Boolean
  properties: [Bytes!]
  comments: [Comment!]
}

type Comment @entity {
  id: ID!
  ipfsHash: Bytes
  ipfsHash2: Bytes
  author: User!
  rating: Int
  postTime: BigInt
  postId: BigInt
  parentReplyId: Int

  content: String

  isDeleted: Boolean
  properties: [Bytes!]
}

type Achievement @entity {
  id: ID!
  factCount: BigInt
  maxCount: BigInt
  achievementURI: String
  achievementsType: Int
  name: String
  description: String
  image: String
  attributes: String
}

type UserReward @entity {
  id: ID!
  period: Period
  user: User
  tokenToReward: BigInt
  status: Boolean
}

type Period @entity {
  id: ID!
  startPeriodTime: BigInt
  endPeriodTime: BigInt
}

type ContractInfo @entity {
  id: ID!
  startPeriodTime: BigInt
  periodLength: BigInt
  lastUpdatePeriod: Int
  lastBlock: BigInt
}
